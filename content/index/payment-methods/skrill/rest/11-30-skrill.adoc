[#SkrillDigitalWallet]
== REST API & {payment-page-v1}/v2
_Skrill Digital Wallet_ is a type of <<PaymentMethods_PaymentMode_Wallet, Wallet>>.

[#SkrillDigitalWallet_GeneralInformation_PaymentMode]
=== Countries and Currencies
[width=75%,cols="1h,3", stripes="none"]
|===
|Countries | Worldwide
|Currencies | Please contact <<ContactUs, Merchant Support>> for Currencies.
|===

[#SkrillDigitalWallet_GeneralInformation_CommunicationFormats]
=== Communication Formats
This table illustrates how _Skrill Digital Wallet_ notifications are
encoded and which formats and methods can be used for requests and
responses.
[width=75%,stripes=none]
|===
.2+h| Requests/Responses | Format   | XML
                         | Methods  | POST
   h| IPN Encodement   2+| Please follow the instructions given at <<GeneralPlatformFeatures_IPN_NotificationExamples,Instant Payment Notification>> to set up IPN.
|===


[#SkrillDigitalWallet_TransactionTypes]
=== Transaction Types

For <<Glossary_TransactionType, transaction type>> details which are not given here look at <<AppendixB,  Transaction Types>>.

[%autowidth]
|===
|Transaction Type |Description |Link to the samples

|_get-url_
|A step in a group of transactions where the provider or bank's URL is retrieved for the Account Holder to be redirected to.
|<<SkrillDigitalWallet_Samples_geturl, _get-url_ samples>>

|_debit_
|Moves funds from consumer to the merchant. Received in notification after _get-url_ request
|

|_credit_
|Moves funds from the merchant to the consumer
|<<SkrillDigitalWallet_Samples_credit, _credit_ samples>>
|===

[#SkrillDigitalWallet_TestCredentials]
=== Test Credentials

[%autowidth]
|===
h|URL (Endpoint)               | ``\https://{test-instance-hostname}/engine/rest/paymentmethods/``
h| Merchant Account ID (MAID)  | 5af4a2f6-f805-4d14-9fc4-304b1266c081
h| Username                    | 16390-testing
h| Password                    | 3!3013=D3fD8X7
h| Secret Key                  | 3bd04dcc-84b2-4b1c-952a-e438c8ae6e1d
|===

[#SkrillDigitalWallet_Workflow]
=== Workflow

image::images/11-30-skrill/Skrill_Workflow.png[Skrill Workflow]

. The consumer initiates a payment.
. The merchant redirects the consumer to the _Skrill Digital Wallet_
site.
. The consumer logs in to wallet account.
. The consumer confirms the payment.
. _Skrill Digital Wallet_ redirects the consumer to the merchant's
success/failure page (depending on notification's content).

//-

[#SkrillDigitalWallet_Fields]
=== Fields

The following elements are mandatory (M), optional (O) or conditional
\(C) for sending a request/response for the payment method _Skrill Digital Wallet_:

[%autowidth]
|===
|Field |Request |Response |Notification |Data Type |Size |Description

|_merchant-account-id_                  |M |M |M |String   |36   |Unique identifier for a merchant account.
|_transaction-id_                       | |M |M  |String   |36   |The Transaction ID is the unique identifier for a transaction. It is generated by Wirecard.
|_request-id_                           |M |M |M |String   |150  |This is the identification number of the request. It has to be unique for each request.
|_transaction-type_                     |M |M |M |String   |30   |This is the type for a transaction.
|_transaction-state_                    | |M |M  |String   |12   |This is the status of a transaction.
|_completion-time-stamp_                | |M |M  |dateTime |     |This is the timestamp of completion of request.
|_status.code_                          | |M |M  |String   |12   |This is the code of the status of a transaction.
|_status.description_                   | |M |M  |String   |256  |This is the description to the status code of a transaction.
|_status.severity_                      | |M |M  |String   |20   |This field gives information if a status is a warning, an error or an information.
|_statuses.Status_                      | |M |M  |String   |12   |This is the status of a transaction.
|_requested-amount_                     |M |M |M |Decimal  |18,3 |This is the amount of the transaction. The amount of the decimal place is dependent of the currency.
|_parent-transaction-id_                |O |O |O |String   |36   |Transaction ID of the first transaction of a payment.
|_account-holder.email_                 |C |C |C |String   |64   |This is the end-consumer's Email-Address. It is mandatory if the field
                                                                  wallet-account-id is not sent in the initial request.
|_account-holder.first-Name_            |M |M |M |String   |27   |This is the first name of the end-consumer. The maximum size
                                                                  of first-name and last-name in combination is 27 characters.
|_account-holder.last-Name_             |M |M |M |String   |27   |This is the last name of the end-consumer. The maximum size of
                                                                  first-name and last-name in combination is 27 characters.
|_order-number_                         |M |M |M |String   |64   |This is the order number of the merchant.
|_order-Detail_                         |O |O |O |String  |65535 |This is a field for details of an order filled by the merchant.
|_descriptor_                           |M |M |M |String   |27   |Description on the settlement of the account holder's account about a
                                                                  transaction. The following characters are allowed: umlaut, -
                                                                  '0-9','a-z','A-Z',' ' , '+',',','-','.'
|_notifications.notification@url_       |O |O |O |String   |256  |The URL to be used for the Instant Payment Notification. It overwrites
                                                                  the notification URL that is set up in the merchant configuration.
|_payment-methods.payment-method-Name_  |M |M |M |String   |15   |This is the name of the payment method. For _Skrill Digital Wallet_ it is "skrill".
|_api-id_                               |  |  |M |String   |     |The API id is always returned in the notification. For _Skrill Digital
                                                                  Wallet_ it is "---"
|_processing-redirect-URL_              |O |O |O |String   |256  |The URL to which the consumer will be redirected after he has fulfilled
                                                                  his payment. This is normally a page on the merchant's website.
|_cancel-redirect-URL_                  |M |M |M |String   |256  |The URL to which the consumer will be re-directed after he has cancelled
                                                                  a payment. This is normally a page on the merchant's Website.
|_success-redirect-URL_                 |O |O |O |String   |256  |The URL to which the consumer will be re-directed after a successful
                                                                  payment. This is normally a success confirmation page on the merchant's website.
|_locale_                               |M |M |M |String   |6    |Code of the language. Can be any of CZ, DA, EN, DE, ES, FI, FR, IT, NL,
                                                                  PL, GR, RO, RU, SV and TR. +
                                                                  Can be sent in the format <language> or in the format <language_country>.
|_wallet-account-id_                    |C |C |C |String   |50   |The unique identifier of the Account Holder's Wallet Account. +
                                                                  It is mandatory if the field ``account-holder.email`` is not sent in the initial request.
|_settlement.gross-amount_              |  |M |  |decimal  |18,3 |The amount due to the Merchant Account for this Payment, in the Payment
                                                                  Settlement Currency, gross of rates, fees, and reserve. The amount of
                                                                  the decimal place is dependent of the currency.
|_settlement.currency_                  |  |M |  |String   |3    |The currency in which the Merchant Account can expect his Payment
                                                                  Settlement Amount.
|_Signature_                            |  |  |M |String   |     |The Signature info, consisting of SignedInfo, SignatureValue and KeyInfo.
|===


[#SkrillDigitalWallet_Samples]
=== Samples

Go to <<GeneralPlatformFeatures_IPN_NotificationExamples, Notification Examples>>, if you want to see corresponding notification samples.

[#SkrillDigitalWallet_Samples_geturl]
==== _get-url_

.XML Get-Url Request (Successful)
[source,xml,subs=attributes+]
----
include::{root}/samples/xml/skrill_get-url_request_success_de_DE.xml[]
----

.XML Get-Url Response (Successful)
[source,xml,subs=attributes+]
----
include::{root}/samples/xml/skrill_get-url_response_success_de_DE.xml[]
----

[#SkrillDigitalWallet_Samples_geturlWalletAccountID]
==== _get-url_ with Wallet Account ID

.XML Get-Url Request - Using a Wallet Account ID (Failure)

[source,xml,subs=attributes+]
----
include::{root}/samples/xml/skrill_get-url_unknown__de_DE.xml[]
----

.XML Get-Url Response - Incorrect Wallet Account ID (Failure)
[source,xml,subs=attributes+]
----
include::{root}/samples/xml/skrill_get-url_response_failure_de_DE.xml[]
----

[#SkrillDigitalWallet_Samples_credit]
==== _credit_

.XML Credit Request (Successful)
[source,xml,subs=attributes+]
----
include::{root}/samples/xml/skrill_credit_request_success.xml[]
----

.XML Credit Response (Successful)
[source,xml,subs=attributes+]
----
include::{root}/samples/xml/skrill_credit_response_success.xml[]
----

//-
